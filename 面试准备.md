## Map Reduce 过程

map 就是将文件拆分为键值对的过程， reduce则是将键值对按照用户定义的逻辑输出结果

在map输出到reduce之间存在着大量处理过程，属于shuffle阶段，

map侧shuffle：map 输出不会直接输出到磁盘，每个map任务都会被分配一个缓存区，缓存区中的数据进行分区、排序、合并等操作，每当缓存容量快被占满时，就会启动溢写，将缓存的内容一次性写入磁盘，并清空缓存，每次溢写操作都会生成一个溢写文件，map任务结束前，会对所有溢写文件进行归并，生成一个大的溢写文件

reduce侧的shuffle：将前面的map输出结果按照分区发送到不同的reduce任务上，领取的数据也是先存到缓存区，然后溢写，最后归并

## Spark为什么比MR快

MR的shuffle阶段存在大量的磁盘读写操作，因此比较慢，而Spark针对此将中间过程放在了内存中，不一定写入磁盘，并支持将反复使用的数据缓存到内存中，减少加载耗时，DAG 相比MapReduce 在大多数情况下可以减少 shuffle 次数。

## 中台项目介绍

智慧会议跟政府部门业务对接，建立了一个数据中台，也有完整的数仓架构，从政府各部门抽取过来的数据暂存在ODS层，然后在DW层构建对应各个业务的主题表单，并将ODS层的数据进行ETL操作输送到相应主题表单里，ETL工具使用的是Kettle，最后ADS层对主题表单里的数据进行数据分析，进行可视化大屏展示。
